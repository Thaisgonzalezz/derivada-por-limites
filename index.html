<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Derivada por Definici√≥n de L√≠mite</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 30px;
      background: #f0f0f0;
    }
    input, button {
      font-size: 1em;
      padding: 6px;
    }
    pre {
      background: white;
      padding: 10px;
      border-radius: 8px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h1>üìò Derivada usando definici√≥n de l√≠mite</h1>
  <p>Usa solo funciones como <code>x*x</code>, <code>Math.sin(x)</code>, <code>Math.exp(x)</code>, etc.</p>

  <label>f(x) = </label>
  <input type="text" id="funcion" value="x*x + 3*x" size="30" />
  <br><br>
  <button onclick="resolver()">Calcular derivada</button>

  <h3>Resultado paso a paso:</h3>
  <pre id="resultado">Esperando entrada...</pre>

  <script>
    function resolver() {
      const expr = document.getElementById('funcion').value;
      const h = 0.000001;
      const x = 1; // punto para evaluar

      try {
        const f = (x) => eval(expr);
        const fx = f(x);
        const fxh = f(x + h);
        const diferencia = (fxh - fx) / h;

        let salida = `f(x) = ${expr}\n`;
        salida += `Paso 1: f(x + h) = ${expr.replaceAll("x", "(x+h)")}\n`;
        salida += `Paso 2: f(x + h) - f(x) = ${fxh.toFixed(6)} - ${fx.toFixed(6)}\n`;
        salida += `Paso 3: [(f(x + h) - f(x)) / h] ‚âà (${fxh.toFixed(6)} - ${fx.toFixed(6)}) / ${h}\n`;
        salida += `Paso 4: Derivada ‚âà ${diferencia.toFixed(6)}\n\n`;
        salida += `‚úÖ Resultado: f'(1) ‚âà ${diferencia.toFixed(6)}`;

        document.getElementById('resultado').innerText = salida;
      } catch (e) {
        document.getElementById('resultado').innerText = '‚ö†Ô∏è Error al evaluar la funci√≥n. Usa solo "x" como variable.';
      }
    }
  </script>

</body>
</html>
